{
  "hash": "f985307d89e94b47777a1b302b1b02d6",
  "result": {
    "markdown": "---\ntitle: \"Survey responses of political affiliation and recognition as an environmentalist with chi-square analysis\"\ndescription: |\n  This script analyzes the association between respondents’ political affiliation (coined “conservative” or “liberal” by self-identification) and if they consider themself an environmentalist, followed by a chi-square test for independence.\nauthor:\n  - name: Elmera Azadpour\ndate: 2021-02-23\nformat: html\ncategories: [code, analysis, chi-square]\nimage: \"political.jpg\"\n---\n\n\n## Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\nlibrary(janitor)\nlibrary(broom)\nlibrary(kableExtra)\n```\n:::\n\n\n### To access data, html and Rmd/qmd files:\n-   the survey data can be found in the *data* folder of [this repo](https://github.com/elmeraa/206-assignment6); the Rmd and html files, denoted as *a6-task2*, can be found in the *src* folder\n- the qmd format can be found [here](https://github.com/elmeraa/elmeraa.github.io/tree/main/posts/2021-02-23-chisquare-politcal)\n\n\n## Introduction:\n\nThis task analyzes the association between respondents' political affiliation (coined \"conservative\" or \"liberal\" by self-identification) and if they consider themself an environmentalist. The variables in the dataset (conservation_survey.csv) I have used include:\n\n-   env_id: response to survey statement \"I consider myself an environmentalist,\" with outcomes 1 = Yes, 2 = No, 3 = Unsure\n-   pol_or: response to survey question \"How do you self-identify politically?\" Response values 1 - 3 are \"conservative\" (strongly to slightly), and values 5 - 7 are \"liberal\" (slightly to strongly).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Read in survey data \nsurvey <- read_csv(here(\"posts\", \"2021-02-23-chisquare-politcal\", \"conservation_survey.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1331 Columns: 95\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (1): DBCODE\ndbl (94): ENTITY, QUALTRICSID, TIME, GEND, AGE, AGE_RANGE, INCO, EDU, RACE, ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## only keep variables: 'env_id' and 'pol_or'\nsurvey_clean <- survey %>% \n  clean_names() %>% \n  dplyr::select(env_id, pol_or) %>% \n  mutate(party = case_when(\n    between(pol_or, 1,3) ~ \"conservative\",\n    between(pol_or, 5,7) ~ \"liberal\",\n    TRUE ~ NA_character_))\n\nsurvey_environmentalist <- survey_clean %>%  \n  mutate(environmentalist = case_when(\n   env_id == 1 ~ \"yes\",\n   env_id == 2 ~ \"no\",\n   env_id == 3 ~ \"unsure\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Finalized table that shows counts and proportions of \"liberal\" and \"conservative\" survey respondents who responded with \"yes\", \"no\" and \"unsure\" to the statement: \"I consider myself an environmentalist\"\nsurvey_counts <- survey_environmentalist %>% \n  janitor::tabyl(party, environmentalist)\n\nsurvey_proportions <- survey_counts %>% \n  adorn_percentages() %>% \n  janitor::adorn_pct_formatting(digits = 2) %>% \n  adorn_ns() %>% \n  drop_na()\n\nsurvey_ct <- survey_proportions %>% \n  column_to_rownames(var = \"party\")\n\nsurvey_ct %>%  \n  kable(col.names = c(\"No\",\n                      \"Unsure\",\n                      \"Yes\"),\n    caption = \"**Table 1**: Association between respondents’ political affiliation (“conservative” or “liberal” by self-identification) vs if they consider themself an environmentalist\") %>% \n  kable_styling(full_width = FALSE) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>**Table 1**: Association between respondents’ political affiliation (“conservative” or “liberal” by self-identification) vs if they consider themself an environmentalist</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:left;\"> No </th>\n   <th style=\"text-align:left;\"> Unsure </th>\n   <th style=\"text-align:left;\"> Yes </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> conservative </td>\n   <td style=\"text-align:left;\"> 50.24% (318) </td>\n   <td style=\"text-align:left;\"> 16.11% (102) </td>\n   <td style=\"text-align:left;\"> 33.65% (213) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> liberal </td>\n   <td style=\"text-align:left;\"> 24.47% (128) </td>\n   <td style=\"text-align:left;\"> 21.80% (114) </td>\n   <td style=\"text-align:left;\"> 53.73% (281) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Chi-square test\nsurvey_ct <- survey_counts %>%   \n  drop_na() %>% \n  column_to_rownames(var = \"party\")\n  \nsurvey_x2 <- chisq.test(survey_ct)\nsurvey_x2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  survey_ct\nX-squared = 81.237, df = 2, p-value < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsurvey_tidy <- tidy(survey_x2)\n```\n:::\n\n\n## Chi-square results and summary\n\nA chi-square test for independence compares two variables in a contingency table to see if they are related. In a more general sense, it tests to see whether distributions of categorical variables differ from each another. For this analysis, there is a significant association (i.e. non-independence) between political affiliation and and if a person considers themself an environmentalist (\\$\\\\chi\\$^2^(2) = 81.24, *p*-value = 2.29e-18).\n\n#### Citations:\n\n-   Andrews Forest LTER Site and C. Batavia. 2019. Influences on charitable giving for conservation: Online survey data of 1,331 respondents across the US, August 2017 ver 3. Environmental Data Initiative. https://doi.org/10.6073/pasta/926e6270e324a1322a900da14d38b96c\n\n-   Metadata, including survey questions and possible responses, are here: https://portal.edirepository.org/nis/metadataviewer?packageid=knb-lter-and.5444.3\n",
    "supporting": [
      "chisquare-politcal_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}