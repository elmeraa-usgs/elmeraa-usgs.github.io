{
  "hash": "ba05895346d5ed0f0edc633fe5161577",
  "result": {
    "markdown": "---\ntitle: \"spotifyr exploration\"\ndescription: |\n  exploring spotifyr package: Harry Style's discography  \nauthor:\n  - name: Elmera Azadpour\ndate: 2022-08-26\nformat: html\ncategories: [code, analysis, music, spotify]\nimage: \"hs.jpg\"\n---\n\n\n### Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(spotifyr)\nlibrary(purrr)\nlibrary(knitr)\nlibrary(ggridges)\nlibrary(ggjoy)\nlibrary(plotly) \n```\n:::\n\n\n### Background\n\nspotifyr is an R wrapper for pulling track audio features and other information from Spotify's Web API in bulk. For more information on the package, I'd recommend taking a look at Charlie's [README.md](https://github.com/charlie86/spotifyr) for more details and examples.\n\n### Find My All Time Favorite Artists\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Set up \n# Sys.setenv(SPOTIFY_CLIENT_ID = 'xxxxxxxxxxxxxxxxxxxxx')\n# Sys.setenv(SPOTIFY_CLIENT_SECRET = 'xxxxxxxxxxxxxxxxxxxxx')\n# access_token <- get_spotify_access_token()\n\ntop_art_tracks_long <- get_my_top_artists_or_tracks(type = 'artists', \n                             time_range = 'long_term', \n                             limit = 50) %>% \n    select(.data$name, .data$genres) %>% \n    rowwise %>% \n    mutate(genres = paste(.data$genres, collapse = ', ')) %>% \n    ungroup \n\ntop_art_tracks_long %>%\n  head(10) %>% \n  kable()\n```\n\n::: {.cell-output-display}\n|name          |genres                                                                                |\n|:-------------|:-------------------------------------------------------------------------------------|\n|Taylor Swift  |pop                                                                                   |\n|Drake         |canadian hip hop, canadian pop, hip hop, rap, toronto rap                             |\n|Kehlani       |dance pop, pop, pop rap, r&b                                                          |\n|The Weeknd    |canadian contemporary r&b, canadian pop, pop                                          |\n|Harry Styles  |pop                                                                                   |\n|Ariana Grande |dance pop, pop                                                                        |\n|Justin Bieber |canadian pop, pop                                                                     |\n|Amin√©         |hip hop, pop, portland hip hop, rap, underground hip hop                              |\n|MUNA          |art pop, dance pop, electropop, indie pop, indie poptimism, la pop, metropopolis, pop |\n|LANY          |la pop, pop                                                                           |\n:::\n:::\n\n\n### Find my favorite tracks at the moment\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_art_tracks_atm <- get_my_top_artists_or_tracks(type = 'tracks', \n                             time_range = 'short_term', \n                             limit = 50) %>% \n    mutate(\n        artist.name = map_chr(artists, function(x) x$name[1])\n        ) %>% \n    select(name, artist.name, album.name) \n```\n:::\n\n\n### What are the most joyful Harry Styles songs and albums ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharry_styles <- get_artist_audio_features('harry styles')\n\nharry_styles_joyful_songs <- harry_styles %>% \n    arrange(-valence) %>% \n    select(.data$track_name, .data$valence) %>% \n  head(20)\n\nggplot(\n    harry_styles_joyful_songs, \n    aes(y = valence, x = reorder(track_name, valence))\n    ) + \ngeom_col() +\n  coord_flip() + \nlabs(title = \"Harry Style's track distribution on musical positiveness\", \n     subtitle = \"Based on valence pulled from Spotify's Web API with spotifyr\",\n     y = \"Valence\",\n     x = \"Track Name\") +\n  theme_minimal() +\n  geom_text(aes(label = round(valence, digits = 3)), position=position_dodge(width=1.0), hjust= -0.30, size=3) +\n  scale_y_continuous(expand = c(0, 0), limits = c(0,1)) \n```\n\n::: {.cell-output-display}\n![](2022-08-26-spotifyr-exploration_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(harry_styles, \n    aes(x = energy, y = album_name, fill = ..x..)) + \ngeom_density_ridges_gradient() + \n  theme(legend.position = \"none\") +\n  labs(x = \"Energy\",\n       y = \"Album Name\")\n```\n\n::: {.cell-output-display}\n![](2022-08-26-spotifyr-exploration_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\n### Exploring Harry Style's discography on danceabiliy *vs.* valence (music positiveness)\n\n-   [*valence*](https://community.spotify.com/t5/Spotify-for-Developers/Valence-as-a-measure-of-happiness/td-p/4385221) : A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhs <- ggplot(\n    harry_styles, \n    aes(x = valence, y = danceability)) + \ngeom_point(size = 2, aes(color = album_name, group = track_name)) +\n  scale_color_manual(values=c(\"#25b6d5\", \"#b1bf46\", \"#813f2b\"), name = \"Album Name\") +\n  theme_minimal() +\n  labs(x = \"Valence\",\n        y =  \"Danceability\") +\n  theme(legend.position=\"bottom\") +\n  scale_x_continuous(expand = c(0, 0), limits = c(0,1)) + \n  scale_y_continuous(expand = c(0, 0), limits = c(0, 1))\n\nggplotly(hs) %>% \nlayout(legend = list(orientation = \"h\",   # show entries horizontally\n                     xanchor = \"center\",  # use center of legend as anchor\n                     x = 0.5, # put legend in center of x-axis\n                     y = -0.15))  # adjust legend text so its not overlapping with x-axis        \n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-7f5648e0ea5b7e3632ba\" style=\"width:100%;height:464px;\" class=\"plotly html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7f5648e0ea5b7e3632ba\">{\"x\":{\"data\":[{\"x\":[0.254,0.557,0.569,0.27,0.411,0.0592,0.605,0.457,0.86,0.7,0.697,0.0511],\"y\":[0.448,0.548,0.676,0.575,0.53,0.567,0.758,0.535,0.566,0.603,0.653,0.306],\"text\":[\"valence: 0.2540<br />danceability: 0.448<br />album_name: Fine Line<br />track_name: Golden\",\"valence: 0.5570<br />danceability: 0.548<br />album_name: Fine Line<br />track_name: Watermelon Sugar\",\"valence: 0.5690<br />danceability: 0.676<br />album_name: Fine Line<br />track_name: Adore You\",\"valence: 0.2700<br />danceability: 0.575<br />album_name: Fine Line<br />track_name: Lights Up\",\"valence: 0.4110<br />danceability: 0.530<br />album_name: Fine Line<br />track_name: Cherry\",\"valence: 0.0592<br />danceability: 0.567<br />album_name: Fine Line<br />track_name: Falling\",\"valence: 0.6050<br />danceability: 0.758<br />album_name: Fine Line<br />track_name: To Be So Lonely\",\"valence: 0.4570<br />danceability: 0.535<br />album_name: Fine Line<br />track_name: She\",\"valence: 0.8600<br />danceability: 0.566<br />album_name: Fine Line<br />track_name: Sunflower, Vol. 6\",\"valence: 0.7000<br />danceability: 0.603<br />album_name: Fine Line<br />track_name: Canyon Moon\",\"valence: 0.6970<br />danceability: 0.653<br />album_name: Fine Line<br />track_name: Treat People With Kindness\",\"valence: 0.0511<br />danceability: 0.306<br />album_name: Fine Line<br />track_name: Fine Line\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(37,182,213,1)\",\"opacity\":1,\"size\":7.55905511811024,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(37,182,213,1)\"}},\"hoveron\":\"points\",\"name\":\"Fine Line\",\"legendgroup\":\"Fine Line\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0.339,0.222,0.458,0.456,0.228,0.348,0.491,0.383,0.379,0.201],\"y\":[0.537,0.516,0.624,0.386,0.427,0.554,0.375,0.389,0.624,0.671],\"text\":[\"valence: 0.3390<br />danceability: 0.537<br />album_name: Harry Styles<br />track_name: Meet Me in the Hallway\",\"valence: 0.2220<br />danceability: 0.516<br />album_name: Harry Styles<br />track_name: Sign of the Times\",\"valence: 0.4580<br />danceability: 0.624<br />album_name: Harry Styles<br />track_name: Carolina\",\"valence: 0.4560<br />danceability: 0.386<br />album_name: Harry Styles<br />track_name: Two Ghosts\",\"valence: 0.2280<br />danceability: 0.427<br />album_name: Harry Styles<br />track_name: Sweet Creature\",\"valence: 0.3480<br />danceability: 0.554<br />album_name: Harry Styles<br />track_name: Only Angel\",\"valence: 0.4910<br />danceability: 0.375<br />album_name: Harry Styles<br />track_name: Kiwi\",\"valence: 0.3830<br />danceability: 0.389<br />album_name: Harry Styles<br />track_name: Ever Since New York\",\"valence: 0.3790<br />danceability: 0.624<br />album_name: Harry Styles<br />track_name: Woman\",\"valence: 0.2010<br />danceability: 0.671<br />album_name: Harry Styles<br />track_name: From the Dining Table\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(177,191,70,1)\",\"opacity\":1,\"size\":7.55905511811024,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(177,191,70,1)\"}},\"hoveron\":\"points\",\"name\":\"Harry Styles\",\"legendgroup\":\"Harry Styles\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0.357,0.901,0.88,0.662,0.626,0.402,0.386,0.896,0.899,0.902,0.301,0.323,0.203],\"y\":[0.72,0.714,0.645,0.52,0.686,0.559,0.507,0.829,0.707,0.721,0.576,0.417,0.555],\"text\":[\"valence: 0.3570<br />danceability: 0.720<br />album_name: Harry's House<br />track_name: Music For a Sushi Restaurant\",\"valence: 0.9010<br />danceability: 0.714<br />album_name: Harry's House<br />track_name: Late Night Talking\",\"valence: 0.8800<br />danceability: 0.645<br />album_name: Harry's House<br />track_name: Grapejuice\",\"valence: 0.6620<br />danceability: 0.520<br />album_name: Harry's House<br />track_name: As It Was\",\"valence: 0.6260<br />danceability: 0.686<br />album_name: Harry's House<br />track_name: Daylight\",\"valence: 0.4020<br />danceability: 0.559<br />album_name: Harry's House<br />track_name: Little Freak\",\"valence: 0.3860<br />danceability: 0.507<br />album_name: Harry's House<br />track_name: Matilda\",\"valence: 0.8960<br />danceability: 0.829<br />album_name: Harry's House<br />track_name: Cinema\",\"valence: 0.8990<br />danceability: 0.707<br />album_name: Harry's House<br />track_name: Daydreaming\",\"valence: 0.9020<br />danceability: 0.721<br />album_name: Harry's House<br />track_name: Keep Driving\",\"valence: 0.3010<br />danceability: 0.576<br />album_name: Harry's House<br />track_name: Satellite\",\"valence: 0.3230<br />danceability: 0.417<br />album_name: Harry's House<br />track_name: Boyfriends\",\"valence: 0.2030<br />danceability: 0.555<br />album_name: Harry's House<br />track_name: Love Of My Life\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(129,63,43,1)\",\"opacity\":1,\"size\":7.55905511811024,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(129,63,43,1)\"}},\"hoveron\":\"points\",\"name\":\"Harry's House\",\"legendgroup\":\"Harry's House\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.2283105022831,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":48.9497716894977},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0.00\",\"0.25\",\"0.50\",\"0.75\",\"1.00\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0.00\",\"0.25\",\"0.50\",\"0.75\",\"1.00\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Valence\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0,1],\"tickmode\":\"array\",\"ticktext\":[\"0.00\",\"0.25\",\"0.50\",\"0.75\",\"1.00\"],\"tickvals\":[0,0.25,0.5,0.75,1],\"categoryorder\":\"array\",\"categoryarray\":[\"0.00\",\"0.25\",\"0.50\",\"0.75\",\"1.00\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.65296803652968,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Danceability\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895},\"title\":{\"text\":\"Album Name\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"orientation\":\"h\",\"xanchor\":\"center\",\"x\":0.5,\"y\":-0.15},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"50a14797265c\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"50a14797265c\",\"visdat\":{\"50a14797265c\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "2022-08-26-spotifyr-exploration_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.0/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.5.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}